<!DOCTYPE html>
<html lang="en-AU">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turntable Finder Assessment</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals with Muted Blue Accent -->
    <!-- Application Structure Plan: To implement a teaser/reveal flow, the application now uses a multi-step lead capture. An initial form gets Name/Email. After the assessment, a new "teaser" screen reveals the recommended product *category* and presents the final form to unlock full details. This progressive disclosure model is designed to maximize lead completion rate. -->
    <!-- Visualization & Content Choices: The application uses interactive HTML/CSS components. Report Info: User contact details. Goal: Use a teaser to encourage final detail submission. Presentation: A new teaser screen is added between the assessment and the results. The form is split into two parts across the user journey. Interaction: User completes the assessment, sees a teaser, then fills a final form to view their detailed result. Justification: This leverages user curiosity and investment in the process to capture more detailed lead information than a single, long upfront form might. Library/Method: Vanilla JS for logic and DOM manipulation. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA;
        }
        .main-container {
            background-color: #FFFFFF;
            border: 1px solid #E5E7EB;
        }
        .quiz-option {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out, border-color 0.2s ease-in-out;
        }
        .quiz-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .input-field {
            margin-top: 0.25rem; display: block; width: 100%; padding: 0.5rem 0.75rem; background-color: white; border: 1px solid #D1D5DB; border-radius: 0.375rem; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        .input-field:focus {
            outline: none; ring-width: 2px; ring-color: #3B82F6; border-color: #3B82F6;
        }
        /* Stage Progress Bar */
        .stage-progress-bar .stage {
            flex: 1; text-align: center; color: #9CA3AF; position: relative;
        }
         .stage-progress-bar .stage .dot {
            width: 1.25rem; height: 1.25rem; border-radius: 50%; background-color: #E5E7EB; margin: 0 auto 0.5rem auto; border: 3px solid #E5E7EB; transition: all 0.3s;
        }
        .stage-progress-bar .stage .line {
            height: 4px; background-color: #E5E7EB; margin: 0 auto; transition: background-color 0.3s;
            position: absolute; width: calc(100% - 2rem); top: 0.625rem; left: calc(50% + 1rem); z-index: -1;
        }
        .stage-progress-bar .stage:last-child .line {
            display: none;
        }
        .stage-progress-bar .stage.active .dot {
            background-color: #fff; border-color: #3B82F6;
        }
        .stage-progress-bar .stage.completed .dot {
             background-color: #3B82F6; border-color: #3B82F6;
        }
         .stage-progress-bar .stage.completed .line {
            background-color: #3B82F6;
        }
        .stage-progress-bar .stage.active .label {
            color: #1F2937; font-weight: 600;
        }
        .stage-progress-bar .stage.completed .label {
            color: #3B82F6;
        }
    </style>
</head>
<body class="text-gray-800 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-3xl mx-auto">
        <div id="stage-progress-container" class="mb-6 hidden">
             <div class="stage-progress-bar flex items-center justify-between">
                <div class="stage" data-stage="1"><div class="dot"></div><div class="label text-sm">Welcome</div><div class="line"></div></div>
                <div class="stage" data-stage="2"><div class="dot"></div><div class="label text-sm">Your Details</div><div class="line"></div></div>
                <div class="stage" data-stage="3"><div class="dot"></div><div class="label text-sm">Assessment</div><div class="line"></div></div>
                <div class="stage" data-stage="4"><div class="dot"></div><div class="label text-sm">Finalise</div><div class="line"></div></div>
                <div class="stage" data-stage="5"><div class="dot"></div><div class="label text-sm">Recommendation</div></div>
            </div>
        </div>
        
        <div class="main-container rounded-2xl">
            <div id="start-screen" class="text-center p-8 fade-in">
                <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">What's the Right Turntable for Your Home?</h1>
                <p class="text-lg text-gray-600 mb-8 max-w-xl mx-auto">This short assessment will help you identify the ideal solution for your space, needs, and style, making parking effortless and safer.</p>
                <button id="go-to-form-btn" class="bg-blue-600 text-white font-bold py-3 px-10 rounded-full text-lg hover:bg-blue-700 transition-colors duration-300 shadow-md hover:shadow-lg">
                    Let's Get Started
                </button>
            </div>

            <div id="initial-form-screen" class="hidden p-8 fade-in">
                <div class="text-center mb-8">
                    <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Let's Get Started</h1>
                    <p class="text-lg text-gray-600 max-w-xl mx-auto">Just a couple of details, then the assessment will begin.</p>
                </div>
                <form id="initial-lead-form" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="name" class="block text-sm font-medium text-gray-700">Full Name</label>
                            <input type="text" id="name" name="name" required class="input-field">
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700">Email Address</label>
                            <input type="email" id="email" name="email" required class="input-field">
                        </div>
                    </div>
                    <div class="flex items-center justify-center gap-4 pt-4">
                        <button type="button" class="back-to-start-btn text-gray-600 font-bold py-3 px-8 rounded-full hover:bg-gray-100 transition-colors">Back to Start</button>
                        <button type="submit" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-full text-lg hover:bg-blue-700 transition-colors duration-300 shadow-md">
                            Start Assessment
                        </button>
                    </div>
                </form>
            </div>

            <div id="assessment-screen" class="hidden p-6 md:p-10 fade-in">
                <div class="text-center mb-8">
                    <h2 id="question-title" class="text-2xl md:text-3xl font-bold mb-2"></h2>
                    <p id="question-subtitle" class="text-gray-500"></p>
                </div>
                <div id="options-container" class="space-y-4">
                </div>
                <div class="text-center mt-8">
                    <button type="button" class="back-to-start-btn text-gray-600 font-bold py-2 px-6 rounded-full hover:bg-gray-100 transition-colors">Back to Start</button>
                </div>
            </div>

            <div id="teaser-details-screen" class="hidden p-8 fade-in">
                <div class="text-center mb-8">
                    <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">Your Recommendation is Ready!</h1>
                    <div class="bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 rounded-r-lg inline-block my-4">
                        <p class="font-bold text-lg" id="teaser-text">Based on your needs, we recommend the...</p>
                    </div>
                    <p class="text-lg text-gray-600 max-w-xl mx-auto">Complete your details below to unlock the full recommendation, including pricing, technical specs, and downloadable files.</p>
                </div>
                <form id="final-lead-form" class="space-y-4">
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="phone" class="block text-sm font-medium text-gray-700">Phone Number</label>
                            <input type="tel" id="phone" name="phone" required class="input-field">
                        </div>
                        <div>
                            <label for="location" class="block text-sm font-medium text-gray-700">Location (Suburb/City)</label>
                            <input type="text" id="location" name="location" required class="input-field">
                        </div>
                    </div>
                    <div id="homeowner-fields" class="space-y-4">
                         <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="date" class="block text-sm font-medium text-gray-700">Expected Deployment Date</label>
                                <input type="date" id="date" name="date" class="input-field">
                            </div>
                            <div>
                                <label for="use_case" class="block text-sm font-medium text-gray-700">Primary Use</label>
                                <select id="use_case" name="use_case" class="input-field">
                                    <option value="">Please select...</option>
                                    <option value="tight_driveway">Solving a tight driveway</option>
                                    <option value="garage_access">Easier garage access</option>
                                    <option value="car_collection">Car collection display</option>
                                    <option value="safety">Avoiding reversing</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div>
                        <label for="comments" class="block text-sm font-medium text-gray-700">Additional Information (Optional)</label>
                        <textarea id="comments" name="comments" rows="3" class="input-field" placeholder="Any specific requirements or questions?"></textarea>
                    </div>
                    <div class="flex items-center justify-center gap-4 pt-4">
                        <button type="submit" id="final-submit-btn" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-full text-lg hover:bg-blue-700 transition-colors duration-300 shadow-md">
                            Unlock Full Recommendation
                        </button>
                    </div>
                </form>
            </div>

            <div id="results-screen" class="hidden p-6 md:p-10 fade-in">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 text-center mb-2">Your Turntable Recommendation</h2>
                <p class="text-gray-600 text-center mb-8">Thank you! Based on your answers, here is the recommended solution for your home.</p>

                <div class="bg-gray-50 border border-gray-200 rounded-xl p-6 md:p-8">
                    <div class="md:flex md:items-center md:space-x-8">
                        <div class="md:w-1/3 mb-6 md:mb-0">
                            <img id="result-image" class="rounded-lg shadow-md" src="https://placehold.co/600x400/e2e8f0/e2e8f0?text=." alt="Recommended Turntable">
                        </div>
                        <div class="md:w-2/3">
                            <h3 id="result-title" class="text-2xl font-bold text-blue-700 mb-2"></h3>
                            <p id="result-description" class="text-gray-700 mb-4"></p>
                        </div>
                    </div>
                    
                    <div id="result-benefits" class="mt-8"></div>
                    <div id="result-details" class="mt-6 pt-6 border-t border-gray-200"></div>
                    <div id="result-pricing" class="mt-6 pt-6 border-t border-gray-200"></div>
                    <div id="result-downloads" class="mt-6 pt-6 border-t border-gray-200"></div>
                </div>
                
                <div class="text-center mt-8 space-y-4 md:space-y-0 md:space-x-4">
                     <p class="text-gray-600">Our team will be in touch shortly with your formal quote.</p>
                </div>
                <div class="text-center mt-6">
                    <button type="button" class="back-to-start-btn text-gray-600 font-bold py-2 px-6 rounded-full hover:bg-gray-100 transition-colors">Start Over</button>
                </div>
            </div>

             <div id="professional-results-screen" class="hidden p-6 md:p-10 fade-in">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 text-center mb-2">Technical Recommendation & Resources</h2>
                <p class="text-gray-600 text-center mb-8">Thank you! Based on the project requirements, here is the recommended system and associated files.</p>
                
                <div class="bg-gray-50 border border-gray-200 rounded-xl p-6 md:p-8">
                     <div class="md:flex md:space-x-8">
                         <div class="md:w-1/3 mb-6 md:mb-0">
                            <img id="prof-result-image" class="rounded-lg shadow-md" src="https://placehold.co/600x400/e2e8f0/e2e8f0?text=." alt="Recommended Turntable">
                        </div>
                         <div class="md:w-2/3">
                            <h3 id="prof-result-title" class="text-2xl font-bold text-blue-700 mb-2"></h3>
                            <p id="prof-result-description" class="text-gray-700 mb-4"></p>
                        </div>
                     </div>

                    <div id="prof-result-specs" class="mt-6 pt-6 border-t border-gray-200"></div>
                    <div id="prof-result-downloads" class="mt-6 pt-6 border-t border-gray-200"></div>
                </div>
                
                 <div class="text-center mt-8 space-y-4">
                    <p class="text-gray-600">We have received your details and will send a formal quote for your tender process shortly.</p>
                 </div>
                 <div class="text-center mt-6">
                    <button type="button" class="back-to-start-btn text-gray-600 font-bold py-2 px-6 rounded-full hover:bg-gray-100 transition-colors">Start New Assessment</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const icons = {
            noCivilWorks: '<svg class="w-8 h-8 text-blue-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5" /></svg>',
            quickInstall: '<svg class="w-8 h-8 text-blue-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" /></svg>',
            portable: '<svg class="w-8 h-8 text-blue-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v.958m12.026 11.177a48.529 48.529 0 01-10.026 0m10.026 0L12 14.25" /></svg>',
            seamless: '<svg class="w-8 h-8 text-blue-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.916 17.916 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418" /></svg>',
            permanent: '<svg class="w-8 h-8 text-blue-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 16.875h3.375m0 0h3.375m-3.375 0V13.5m0 3.375v3.375M6 10.5h2.25a2.25 2.25 0 002.25-2.25V6a2.25 2.25 0 00-2.25-2.25H6A2.25 2.25 0 003.75 6v2.25A2.25 2.25 0 006 10.5zm0 9.75h2.25A2.25 2.25 0 0010.5 18v-2.25a2.25 2.25 0 00-2.25-2.25H6a2.25 2.25 0 00-2.25 2.25V18A2.25 2.25 0 006 20.25zm9.75-9.75H18a2.25 2.25 0 002.25-2.25V6A2.25 2.25 0 0018 3.75h-2.25A2.25 2.25 0 0013.5 6v2.25a2.25 2.25 0 002.25 2.25z" /></svg>',
            durable: '<svg class="w-8 h-8 text-blue-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286zm0 13.036h.008v.008h-.008v-.008z" /></svg>',
            custom: '<svg class="w-8 h-8 text-blue-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.47 2.118 2.25 2.25 0 01-2.47-2.118c0-.62.28-1.186.74-1.544a3 3 0 005.78-1.128 2.25 2.25 0 012.47-2.118 2.25 2.25 0 012.47 2.118c0 .62-.28 1.186-.74 1.544a3 3 0 00-5.78 1.128zM12.75 21a3 3 0 005.78-1.128 2.25 2.25 0 012.47-2.118 2.25 2.25 0 012.47 2.118c0 .62-.28 1.186-.74 1.544a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.47 2.118 2.25 2.25 0 01-2.47-2.118c0-.62.28-1.186.74-1.544a3 3 0 005.78-1.128z" /><path stroke-linecap="round" stroke-linejoin="round" d="M12 9.75a3 3 0 00-3 3m0 0a3 3 0 01-3-3m3 3a3 3 0 003-3m-3 3a3 3 0 013-3m-9.75 6.75a3 3 0 003-3m-3 3a3 3 0 013-3m3 3a3 3 0 003-3m3 3a3 3 0 01-3-3m-3 3a3 3 0 00-3-3m-6 9a3 3 0 003-3" /></svg>',
            invisible: '<svg class="w-8 h-8 text-blue-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88" /></svg>',
            heavyDuty: '<svg class="w-8 h-8 text-blue-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z" /></svg>',
            dualVehicle: '<svg class="w-8 h-8 text-blue-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6.429 9.75L2.25 12l4.179 2.25m0-4.5l5.571 3 5.571-3m-11.142 0L2.25 12l4.179 2.25M6.429 15.75l5.571 3 5.571-3m-11.142 0L2.25 18l4.179 2.25" /></svg>',
        };
        
        const assessmentData = {
            'installation': {
                id: 'installation',
                title: "Installation Preference",
                subtitle: "Are you ready for a permanent, integrated solution, or do you prefer on-surface convenience?",
                options: [
                    { value: 'inground', text: "Yes, I want a seamless, in-ground look.", description: "I'm prepared for the necessary civil works to achieve a premium, integrated finish." },
                    { value: 'onsurface', text: "No, I prefer a straightforward on-surface solution.", description: "I want to avoid construction and install a turntable directly on my existing surface." }
                ]
            },
            'ctx_finish': {
                id: 'ctx_finish',
                title: "CTX Finish Preference",
                subtitle: "What style best suits your project's aesthetic?",
                options: [
                    { value: 'standard', text: "Standard Chequer Plate", description: "A durable, hot-dipped galvanised steel finish. Functional and built to last." },
                    { value: 'custom', text: "Custom Infill Finish", description: "To match the existing surface (pavers, tiles, concrete, etc.) for a completely seamless look." }
                ]
            },
            'ctx_vehicle': {
                id: 'ctx_vehicle',
                title: "Vehicle Requirements",
                subtitle: "What will the turntable need to accommodate?",
                options: [
                    { value: 'standard_single', text: "One Standard Car/SUV", description: "A single vehicle weighing less than 4,000 kg." },
                    { value: 'large_single', text: "One Heavy or Large Vehicle", description: "A vehicle heavier than 4,000 kg or with a long wheelbase." },
                    { value: 'dual_vehicle', text: "Two Vehicles", description: "To accommodate two standard-sized vehicles at once." }
                ]
            },
            'ctx_team': {
                id: 'ctx_team',
                title: "Who is involved in your project?",
                subtitle: "This helps us understand how to best support your installation.",
                options: [
                    { value: 'homeowner', text: "I am the homeowner managing the project." },
                    { value: 'architect', text: "I'm working with an Architect/Designer." },
                    { value: 'builder', text: "I'm working with a Builder." },
                    { value: 'professional', text: "I am the Architect/Builder for this project." }
                ]
            }
        };

        const resultsData = {
            spinsy: {
                title: "Spinsy On-Surface Turntable",
                image_url: "https://placehold.co/600x400/dbeafe/4c51bf?text=Spinsy",
                description: "You prioritise convenience, simplicity, and flexibility. The Spinsy is the perfect choice because it requires no civil work, can be installed quickly on almost any flat surface, and can even be moved to a new home if your plans change.",
                benefits: [ { icon: icons.noCivilWorks, text: 'No Civil Works' }, { icon: icons.quickInstall, text: 'Quick Installation' }, { icon: icons.portable, text: 'Portable Design' } ],
                price_info: { base: 26500, options: [ { id: 'ramps', label: 'Add Optional Ramps', cost: 1500 } ], note: '+ shipping (cost TBD)' },
                details: `<h4 class="text-xl font-bold mb-4 text-gray-800">Why Spinsy is the right fit:</h4>
                    <ul class="space-y-3 text-gray-600">
                        <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">&#10004;</span> <div><strong>No Civil Work Required:</strong> A true on-surface model, saving you time, complexity, and the cost of excavation.</div></li>
                        <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">&#10004;</span> <div><strong>Quick & Easy Installation:</strong> Can be installed and ready to use almost immediately on your existing driveway, in a carport, or garage.</div></li>
                        <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">&#10004;</span> <div><strong>Portable:</strong> If you move, you can take your Spinsy with you—a practical, long-term investment.</div></li>
                    </ul>
                    <div class="mt-6 pt-4 border-t border-gray-200"><p class="font-semibold"><strong>Model:</strong> Spinsy SMLP 45 (4.5m diameter, 3000kg capacity)</p></div>`,
                downloads: [ { name: "Spinsy - Brochure.pdf", url: "#" }, { name: "Spinsy - Tech Specs.pdf", url: "#" }, { name: "ATT - SPINSY - 3 FOLD BROCHURE - LITE.pdf", url: "#" } ]
            },
            ctx: {
                title: "CTX Range In-Ground Turntable",
                image_url: "https://placehold.co/600x400/e0e7ff/4338ca?text=CTX",
                description: "Your perfect match. It offers a robust hot-dipped galvanised chequer plate finish and is engineered for vehicles up to 4000 kg. You value a seamless aesthetic and are ready to invest in a permanent, fully integrated feature.",
                benefits: [ { icon: icons.seamless, text: 'Seamless Finish' }, { icon: icons.permanent, text: 'Permanent Solution' }, { icon: icons.durable, text: 'Durable Build' } ],
                price_info: { base: 30000, options: [ { id: 'diameter', label: 'Select Diameter:', type: 'select', values: [ { text: '4.0m', cost: 0 }, { text: '4.5m', cost: 2000 }, { text: '4.8m', cost: 3500 } ] } ], note: 'Final cost depends on options.', helper: '<strong>4.0m:</strong> Ideal for standard sedans (e.g., Toyota Camry, Honda Civic).<br><strong>4.5m / 4.8m:</strong> Recommended for larger sedans, utes, and most SUVs (e.g., Toyota LandCruiser Prado, Ford Ranger).' },
                details: `<h4 class="text-xl font-bold mb-4 text-gray-800">Key Features:</h4>
                    <ul class="space-y-3 text-gray-600">
                         <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">&#10004;</span> <div><strong>Permanent Solution:</strong> An in-ground installation for a sleek, flush finish.</div></li>
                         <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">&#10004;</span> <div><strong>Durable Finish:</strong> Comes with a robust hot-dipped galvanised chequer plate surface.</div></li>
                         <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">&#10004;</span> <div><strong>Standard Capacity:</strong> Engineered for single standard cars and SUVs up to 4000 kg.</div></li>
                    </ul>
                     <div class="mt-6 pt-4 border-t border-gray-200"><p class="font-semibold"><strong>Available Diameters:</strong> 4.0m, 4.5m, 4.8m</p><p class="font-semibold"><strong>Load Capacity:</strong> 4,000 kg</p></div>`,
                downloads: [{ name: "CTX_Turntable_Specification.pdf", url: "#" }]
            },
            ctx_pr: {
                title: "CTX-PR Range In-Ground Turntable",
                image_url: "https://placehold.co/600x400/e0e7ff/4338ca?text=CTX-PR",
                description: "Designed for you. It comes with a 100mm rebate that allows you to fill the surface with your own materials (pavers, tiles, concrete) for a completely seamless look.",
                benefits: [ { icon: icons.custom, text: 'Fully Customisable' }, { icon: icons.invisible, text: 'Invisible Look' }, { icon: icons.permanent, text: 'Permanent Solution' } ],
                price_info: { base: 32000, options: [ { id: 'diameter', label: 'Select Diameter:', type: 'select', values: [ { text: '4.0m', cost: 0 }, { text: '4.5m', cost: 2000 }, { text: '4.8m', cost: 3500 } ] } ], note: 'Final cost depends on options.', helper: '<strong>4.0m:</strong> Ideal for standard sedans (e.g., Toyota Camry, Honda Civic).<br><strong>4.5m / 4.8m:</strong> Recommended for larger sedans, utes, and most SUVs (e.g., Toyota LandCruiser Prado, Ford Ranger).' },
                details: `<h4 class="text-xl font-bold mb-4 text-gray-800">Key Features:</h4>
                     <ul class="space-y-3 text-gray-600">
                         <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">&#10004;</span> <div><strong>Ultimate Customisation:</strong> Features a 100mm rebate to be filled with your custom surface material.</div></li>
                         <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">&#10004;</span> <div><strong>Invisible Look:</strong> Achieves a completely seamless integration with your driveway or garage.</div></li>
                         <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">&#10004;</span> <div><strong>Standard Capacity:</strong> Perfect for single standard cars and SUVs up to 4000 kg.</div></li>
                    </ul>
                    <div class="mt-6 pt-4 border-t border-gray-200"><p class="font-semibold"><strong>Available Diameters:</strong> 4.0m, 4.5m, 4.8m</p><p class="font-semibold"><strong>Load Capacity:</strong> 4,000 kg</p></div>`,
                downloads: [{ name: "CTX-PR_Turntable_Specification.pdf", url: "#" }]
            },
            ctx_plus: {
                title: "CTX+ Range In-Ground Turntable",
                image_url: "https://placehold.co/600x400/c7d2fe/4338ca?text=CTX%2B",
                description: "You need the power and size. With an 8000 kg capacity and diameters up to 6.5 metres, it's built to handle two cars or a single, very large private vehicle.",
                benefits: [ { icon: icons.heavyDuty, text: 'Heavy-Duty' }, { icon: icons.dualVehicle, text: 'Dual Vehicle Size' }, { icon: icons.durable, text: 'Durable Build' } ],
                price_info: { base: 45000, options: [ { id: 'diameter', label: 'Select Diameter:', type: 'select', values: [ { text: '5.6m', cost: 0 }, { text: '6.0m', cost: 3000 }, { text: '6.5m', cost: 6000 } ] } ], note: 'Final cost depends on options.', helper: '<strong>5.6m:</strong> Comfortably fits one very large vehicle.<br><strong>6.0m:</strong> Designed to accommodate two standard sedans.<br><strong>6.5m:</strong> The premium choice for two large SUVs or utes.' },
                details: `<h4 class="text-xl font-bold mb-4 text-gray-800">Key Features:</h4>
                     <ul class="space-y-3 text-gray-600">
                         <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">&#10004;</span> <div><strong>Heavy-Duty Capacity:</strong> Engineered for an 8000 kg operating capacity.</div></li>
                         <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">&#10004;</span> <div><strong>Dual Vehicle / Large Size:</strong> Large enough to handle two standard vehicles or one very large one.</div></li>
                         <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">&#10004;</span> <div><strong>Durable Finish:</strong> Comes with a robust hot-dipped galvanised chequer plate surface.</div></li>
                    </ul>
                    <div class="mt-6 pt-4 border-t border-gray-200"><p class="font-semibold"><strong>Available Diameters:</strong> 5.6m, 6.0m, 6.5m</p><p class="font-semibold"><strong>Load Capacity:</strong> 8,000 kg</p></div>`,
                downloads: [{ name: "CTX+_Turntable_Specification.pdf", url: "#" }]
            },
            ctx_pr_plus: {
                title: "CTX-PR+ Range In-Ground Turntable",
                image_url: "https://placehold.co/600x400/c7d2fe/4338ca?text=CTX-PR%2B",
                description: "The ultimate combination of strength and style. It has the 8000 kg capacity you need, plus the rebate for your custom infill, ensuring a perfect blend of brawn and beauty.",
                benefits: [ { icon: icons.custom, text: 'Fully Customisable' }, { icon: icons.heavyDuty, text: 'Heavy-Duty' }, { icon: icons.dualVehicle, text: 'Dual Vehicle Size' } ],
                 price_info: { base: 48000, options: [ { id: 'diameter', label: 'Select Diameter:', type: 'select', values: [ { text: '5.6m', cost: 0 }, { text: '6.0m', cost: 3000 }, { text: '6.5m', cost: 6000 } ] } ], note: 'Final cost depends on options.', helper: '<strong>5.6m:</strong> Comfortably fits one very large vehicle.<br><strong>6.0m:</strong> Designed to accommodate two standard sedans.<br><strong>6.5m:</strong> The premium choice for two large SUVs or utes.' },
                details: `<h4 class="text-xl font-bold mb-4 text-gray-800">Key Features:</h4>
                    <ul class="space-y-3 text-gray-600">
                         <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">&#10004;</span> <div><strong>Maximum Power & Style:</strong> Combines 8000 kg capacity with full surface customisation.</div></li>
                         <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">&#10004;</span> <div><strong>Invisible Look:</strong> The 100mm rebate allows for a seamless match with your high-end finishes.</div></li>
                         <li class="flex items-start"><span class="text-blue-600 mr-3 mt-1">&#10004;</span> <div><strong>Dual Vehicle / Large Size:</strong> The premier choice for multi-car or large vehicle parking solutions.</div></li>
                    </ul>
                    <div class="mt-6 pt-4 border-t border-gray-200"><p class="font-semibold"><strong>Available Diameters:</strong> 5.6m, 6.0m, 6.5m</p><p class="font-semibold"><strong>Load Capacity:</strong> 8,000 kg</p></div>`,
                downloads: [{ name: "CTX-PR+_Turntable_Specification.pdf", url: "#" }]
            }
        };

        const professionalResultsData = {
            ctx: {
                ...resultsData.ctx,
                description: "Suitable for single-vehicle applications requiring a durable, integrated solution. The hot-dipped galvanised chequer plate provides a robust, trafficable surface.",
                specs: `<h4 class="text-xl font-bold mb-4 text-gray-800">Core Technical Specifications:</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 text-sm">
                        <div><strong class="text-gray-900 block">Platform Finish:</strong> Hot-dipped galvanised chequer plate (5mm)</div>
                        <div><strong class="text-gray-900 block">Slab Depth:</strong> 210mm min.</div>
                        <div><strong class="text-gray-900 block">Operating Capacity:</strong> 4,000 kg</div>
                        <div><strong class="text-gray-900 block">Distributed Load Capacity:</strong> 5 kPa</div>
                        <div><strong class="text-gray-900 block">Drive Mechanism:</strong> Gear-driven, 0.37 kW motor</div>
                        <div><strong class="text-gray-900 block">Power Supply:</strong> AC-240V 50Hz 10Amps</div>
                    </div>
                    <h4 class="text-xl font-bold mt-6 mb-4 text-gray-800">Sizing & Clearance Specifications</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                        <div class="bg-white p-3 rounded-lg border"><p class="font-bold text-gray-900">4.0m Turntable</p><p class="text-sm text-gray-600">Req. 5.8m Clearance Dia.</p></div>
                        <div class="bg-white p-3 rounded-lg border"><p class="font-bold text-gray-900">4.5m Turntable</p><p class="text-sm text-gray-600">Req. 6.0m Clearance Dia.</p></div>
                        <div class="bg-white p-3 rounded-lg border"><p class="font-bold text-gray-900">4.8m Turntable</p><p class="text-sm text-gray-600">Req. 6.0m Clearance Dia.</p></div>
                    </div>`
            },
             ctx_pr: {
                ...resultsData.ctx_pr,
                description: "The ideal specification for projects demanding seamless architectural integration. The 100mm platform rebate allows for infill with specified materials (concrete, pavers, tiles).",
                specs: `<h4 class="text-xl font-bold mb-4 text-gray-800">Core Technical Specifications:</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 text-sm">
                        <div><strong class="text-gray-900 block">Platform Finish:</strong> 100mm rebate for custom infill</div>
                        <div><strong class="text-gray-900 block">Slab Depth:</strong> 305mm min.</div>
                        <div><strong class="text-gray-900 block">Operating Capacity:</strong> 4,000 kg</div>
                        <div><strong class="text-gray-900 block">Allowable Infill Mass:</strong> Up to 4,700 kg (model dependent)</div>
                        <div><strong class="text-gray-900 block">Drive Mechanism:</strong> Gear-driven, 0.75 kW motor</div>
                        <div><strong class="text-gray-900 block">Power Supply:</strong> AC-240V 50Hz 10Amps</div>
                    </div>
                    <h4 class="text-xl font-bold mt-6 mb-4 text-gray-800">Sizing & Clearance Specifications</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                        <div class="bg-white p-3 rounded-lg border"><p class="font-bold text-gray-900">4.0m Turntable</p><p class="text-sm text-gray-600">Req. 5.8m Clearance Dia.</p></div>
                        <div class="bg-white p-3 rounded-lg border"><p class="font-bold text-gray-900">4.5m Turntable</p><p class="text-sm text-gray-600">Req. 6.0m Clearance Dia.</p></div>
                        <div class="bg-white p-3 rounded-lg border"><p class="font-bold text-gray-900">4.8m Turntable</p><p class="text-sm text-gray-600">Req. 6.0m Clearance Dia.</p></div>
                    </div>`
            },
            ctx_plus: {
                ...resultsData.ctx_plus,
                description: "Heavy-duty specification for dual-vehicle residential projects or single light commercial vehicles. Offers increased diameter and load capacity with a standard chequer plate finish.",
                 specs: `<h4 class="text-xl font-bold mb-4 text-gray-800">Core Technical Specifications:</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 text-sm">
                        <div><strong class="text-gray-900 block">Platform Finish:</strong> Hot-dipped galvanised chequer plate (5mm)</div>
                        <div><strong class="text-gray-900 block">Slab Depth:</strong> 260mm min.</div>
                        <div><strong class="text-gray-900 block">Operating Capacity:</strong> 8,000 kg</div>
                        <div><strong class="text-gray-900 block">Distributed Load Capacity:</strong> 5 kPa</div>
                        <div><strong class="text-gray-900 block">Drive Mechanism:</strong> Gear-driven, 0.75 kW motor</div>
                        <div><strong class="text-gray-900 block">Power Supply:</strong> AC-240V 50Hz 10Amps</div>
                    </div>
                    <h4 class="text-xl font-bold mt-6 mb-4 text-gray-800">Sizing & Clearance Specifications</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                        <div class="bg-white p-3 rounded-lg border"><p class="font-bold text-gray-900">5.6m Turntable</p><p class="text-sm text-gray-600">Req. 6.0m Clearance Dia.</p></div>
                        <div class="bg-white p-3 rounded-lg border"><p class="font-bold text-gray-900">6.0m Turntable</p><p class="text-sm text-gray-600">Req. 7.2m Clearance Dia.</p></div>
                        <div class="bg-white p-3 rounded-lg border"><p class="font-bold text-gray-900">6.5m Turntable</p><p class="text-sm text-gray-600">Req. 7.2m Clearance Dia.</p></div>
                    </div>
                    <p class="text-xs text-gray-500 mt-2 text-center">Clearance diameters based on specified vehicle sizes (e.g. B99, 2xB85). Refer to tech specs for details.</p>`
            },
            ctx_pr_plus: {
                ...resultsData.ctx_pr_plus,
                description: "The premium solution for high-end projects requiring both maximum load capacity and complete aesthetic integration via a custom infill platform.",
                specs: `<h4 class="text-xl font-bold mb-4 text-gray-800">Core Technical Specifications:</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 text-sm">
                        <div><strong class="text-gray-900 block">Platform Finish:</strong> 100mm rebate for custom infill</div>
                        <div><strong class="text-gray-900 block">Slab Depth:</strong> 355mm min.</div>
                        <div><strong class="text-gray-900 block">Operating Capacity:</strong> 8,000 kg</div>
                        <div><strong class="text-gray-900 block">Allowable Infill Mass:</strong> Up to 8,000 kg (model dependent)</div>
                        <div><strong class="text-gray-900 block">Drive Mechanism:</strong> Gear-driven, 2x 0.75 kW motors</div>
                        <div><strong class="text-gray-900 block">Power Supply:</strong> AC-240V 50Hz 10Amps</div>
                    </div>
                    <h4 class="text-xl font-bold mt-6 mb-4 text-gray-800">Sizing & Clearance Specifications</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                        <div class="bg-white p-3 rounded-lg border"><p class="font-bold text-gray-900">5.6m Turntable</p><p class="text-sm text-gray-600">Req. 6.0m Clearance Dia.</p></div>
                        <div class="bg-white p-3 rounded-lg border"><p class="font-bold text-gray-900">6.0m Turntable</p><p class="text-sm text-gray-600">Req. 7.2m Clearance Dia.</p></div>
                        <div class="bg-white p-3 rounded-lg border"><p class="font-bold text-gray-900">6.5m Turntable</p><p class="text-sm text-gray-600">Req. 7.2m Clearance Dia.</p></div>
                    </div>
                    <p class="text-xs text-gray-500 mt-2 text-center">Clearance diameters based on specified vehicle sizes (e.g. B99, 2xB85). Refer to tech specs for details.</p>`
            }
        };


        let currentQuestionIndex = 0;
        let userAnswers = {};
        let allLeadData = {};
        let questionFlow = [];

        const stageProgressContainer = document.getElementById('stage-progress-container');
        const startScreen = document.getElementById('start-screen');
        const initialFormScreen = document.getElementById('initial-form-screen');
        const assessmentScreen = document.getElementById('assessment-screen');
        const teaserDetailsScreen = document.getElementById('teaser-details-screen');
        const resultsScreen = document.getElementById('results-screen');
        const professionalResultsScreen = document.getElementById('professional-results-screen');
        
        const goToFormBtn = document.getElementById('go-to-form-btn');
        const initialLeadForm = document.getElementById('initial-lead-form');
        const finalLeadForm = document.getElementById('final-lead-form');
        const backToStartBtns = document.querySelectorAll('.back-to-start-btn');
        
        const questionTitle = document.getElementById('question-title');
        const questionSubtitle = document.getElementById('question-subtitle');
        const optionsContainer = document.getElementById('options-container');
        
        const resultImage = document.getElementById('result-image');
        const resultTitle = document.getElementById('result-title');
        const resultDescription = document.getElementById('result-description');
        const resultBenefits = document.getElementById('result-benefits');
        const resultDetails = document.getElementById('result-details');
        const resultPricing = document.getElementById('result-pricing');
        const resultDownloads = document.getElementById('result-downloads');
        
        const profResultImage = document.getElementById('prof-result-image');
        const profResultTitle = document.getElementById('prof-result-title');
        const profResultDescription = document.getElementById('prof-result-description');
        const profResultSpecs = document.getElementById('prof-result-specs');
        const profResultDownloads = document.getElementById('prof-result-downloads');
        
        const teaserText = document.getElementById('teaser-text');

        const updateStageProgress = (currentStage) => {
            const stages = stageProgressContainer.querySelectorAll('.stage');
            stages.forEach(stage => {
                const stageNumber = parseInt(stage.dataset.stage, 10);
                stage.classList.remove('active', 'completed');
                if (stageNumber < currentStage) {
                    stage.classList.add('completed');
                } else if (stageNumber === currentStage) {
                    stage.classList.add('active');
                }
            });
        };
        
        const getQuestionById = (id) => assessmentData[id];

        goToFormBtn.addEventListener('click', () => {
             startScreen.classList.add('hidden');
             initialFormScreen.classList.remove('hidden');
             stageProgressContainer.classList.remove('hidden');
             updateStageProgress(2);
        });
        
        initialLeadForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const formData = new FormData(initialLeadForm);
            allLeadData = Object.fromEntries(formData.entries());
            startAssessment();
        });

        finalLeadForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const formData = new FormData(finalLeadForm);
            const finalData = Object.fromEntries(formData.entries());
            allLeadData = {...allLeadData, ...finalData};
            showResults();
        });

        backToStartBtns.forEach(btn => {
            btn.addEventListener('click', restartAssessment);
        });

        function startAssessment() {
            initialFormScreen.classList.add('hidden');
            assessmentScreen.classList.remove('hidden');
            currentQuestionIndex = 0;
            userAnswers = {};
            questionFlow = [getQuestionById('installation')];
            updateStageProgress(3);
            displayQuestion();
        }
        
        function restartAssessment() {
            resultsScreen.classList.add('hidden');
            professionalResultsScreen.classList.add('hidden');
            teaserDetailsScreen.classList.add('hidden');
            assessmentScreen.classList.add('hidden');
            initialFormScreen.classList.add('hidden');
            stageProgressContainer.classList.add('hidden');
            startScreen.classList.remove('hidden');
            initialLeadForm.reset();
            finalLeadForm.reset();
            updateStageProgress(1);
        }

        function displayQuestion() {
            const question = questionFlow[currentQuestionIndex];
            questionTitle.textContent = question.title;
            questionSubtitle.textContent = question.subtitle;
            optionsContainer.innerHTML = '';

            question.options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'quiz-option w-full text-left p-4 border border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500';
                let descriptionHTML = option.description ? `<p class="text-gray-600">${option.description}</p>` : '';
                button.innerHTML = `
                    <span class="font-bold text-lg text-gray-800">${option.text}</span>
                    ${descriptionHTML}
                `;
                button.onclick = () => selectAnswer(question.id, option.value);
                optionsContainer.appendChild(button);
            });
        }

        function selectAnswer(questionId, value) {
            userAnswers[questionId] = value;
            
            if (questionId === 'installation') {
                if (value === 'inground') {
                    questionFlow = [
                        getQuestionById('ctx_finish'),
                        getQuestionById('ctx_vehicle'),
                        getQuestionById('ctx_team')
                    ];
                    currentQuestionIndex = 0;
                    displayQuestion();
                } else { 
                    showTeaserDetailsScreen();
                }
            } else {
                currentQuestionIndex++;
                if (currentQuestionIndex < questionFlow.length) {
                    displayQuestion();
                } else {
                    showTeaserDetailsScreen();
                }
            }
        }

        function showTeaserDetailsScreen() {
            assessmentScreen.classList.add('hidden');
            teaserDetailsScreen.classList.remove('hidden');
            updateStageProgress(4);
            
            const resultKey = calculateResult();
            const resultData = resultsData[resultKey];
            teaserText.innerHTML = `Based on your needs, we recommend the <strong class="text-blue-800">${resultData.title}</strong>`;


            const isProfessional = userAnswers['ctx_team'] === 'professional';
            const homeownerFields = document.getElementById('homeowner-fields');
            const finalSubmitBtn = document.getElementById('final-submit-btn');

            if (isProfessional) {
                homeownerFields.classList.add('hidden');
                finalSubmitBtn.textContent = 'Unlock Recommendation & Resources';
            } else {
                homeownerFields.classList.remove('hidden');
                finalSubmitBtn.textContent = 'Unlock Full Recommendation';
            }
        }


        function showResults() {
            teaserDetailsScreen.classList.add('hidden');
            updateStageProgress(5);
            const userRole = userAnswers['ctx_team'];

            if (userRole === 'professional') {
                showProfessionalResults();
            } else {
                showHomeownerResults();
            }
        }

        function showHomeownerResults() {
            resultsScreen.classList.remove('hidden');
            const resultKey = calculateResult();
            const resultData = resultsData[resultKey];
            
            resultImage.src = resultData.image_url;
            resultImage.alt = resultData.title;
            resultTitle.textContent = resultData.title;
            resultDescription.textContent = resultData.description;
            
            resultBenefits.innerHTML = '';
            if (resultData.benefits) {
                const benefitsHTML = resultData.benefits.map(benefit => `
                    <div class="text-center">
                        <div class="h-10 flex items-center justify-center">${benefit.icon}</div>
                        <p class="mt-2 text-sm font-medium text-gray-600">${benefit.text}</p>
                    </div>
                `).join('');
                resultBenefits.innerHTML = `<h4 class="text-xl font-bold mb-4 text-gray-800 text-center">At a Glance</h4><div class="grid grid-cols-3 gap-4 bg-white p-4 rounded-lg shadow-inner">${benefitsHTML}</div>`;
            }

            resultDetails.innerHTML = resultData.details;
            if (resultData.price_info) {
                displayPricingSection(resultData.price_info);
            } else {
                 resultPricing.innerHTML = '';
            }
            resultDownloads.innerHTML = '<h4 class="text-xl font-bold mb-4 text-gray-800 text-center">Download Technical Documentation</h4><div class="flex flex-wrap gap-4 justify-center"></div>';
            const downloadContainer = resultDownloads.querySelector('div');
            resultData.downloads.forEach(doc => {
                 downloadContainer.innerHTML += `<a href="${doc.url}" download="${doc.name}" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg inline-flex items-center transition-colors">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20"><path d="M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"/></svg>
                    <span>${doc.name}</span></a>`;
            });
        }
        
        function showProfessionalResults() {
            professionalResultsScreen.classList.remove('hidden');
            const resultKey = calculateResult();
            const resultData = professionalResultsData[resultKey];

            if (!resultData) { 
                showHomeownerResults(); 
                return;
            }

            profResultImage.src = resultData.image_url;
            profResultImage.alt = resultData.title;
            profResultTitle.textContent = resultData.title;
            profResultDescription.textContent = resultData.description;
            profResultSpecs.innerHTML = resultData.specs;

            const profDownloadsHTML = `
                <h4 class="text-xl font-bold mb-4 text-gray-800 text-center">Design Files & Specifications</h4>
                <div class="flex flex-wrap gap-4 justify-center">
                    <a href="#" download class="bg-blue-100 hover:bg-blue-200 text-blue-800 font-semibold py-2 px-4 rounded-lg inline-flex items-center transition-colors">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                        <span>${resultData.downloads[0].name}</span>
                    </a>
                    <a href="#" download class="bg-green-100 hover:bg-green-200 text-green-800 font-semibold py-2 px-4 rounded-lg inline-flex items-center transition-colors">
                         <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 21h7a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v11m0 5l-3-3m0 0l3-3m-3 3h5"></path></svg>
                        <span>CAD Files (.dwg)</span>
                    </a>
                    <a href="#" download class="bg-red-100 hover:bg-red-200 text-red-800 font-semibold py-2 px-4 rounded-lg inline-flex items-center transition-colors">
                       <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                        <span>Revit Family (.rfa)</span>
                    </a>
                </div>`;
            profResultDownloads.innerHTML = profDownloadsHTML;
        }

        function displayPricingSection(priceInfo) {
            let optionsHTML = '';
            let helperHTML = '';
            if (priceInfo.options) {
                priceInfo.options.forEach(opt => {
                    if (opt.type === 'select') {
                        const selectOptions = opt.values.map(val => `<option value="${val.cost}" data-label="${val.text}">${val.text}</option>`).join('');
                        let labelHTML = `<label for="${opt.id}" class="text-gray-600">${opt.label}</label>`;
                        if (priceInfo.helper) {
                             labelHTML += `<button type="button" id="diameter-helper-btn" class="ml-2 text-blue-600 hover:underline text-sm">(Help me choose)</button>`;
                             helperHTML = `<div id="diameter-helper-text" class="hidden mt-2 p-3 bg-blue-50 border border-blue-200 text-blue-800 text-sm rounded-lg">${priceInfo.helper}</div>`;
                        }
                        optionsHTML += `<div class="flex items-center justify-between"><div>${labelHTML}</div><select id="${opt.id}" class="price-option input-field w-auto">${selectOptions}</select></div>`;
                    } else {
                        optionsHTML += `<div class="flex items-center justify-between"><label for="${opt.id}" class="text-gray-600">${opt.label}</label><input type="checkbox" id="${opt.id}" value="${opt.cost}" class="price-option h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"></div>`;
                    }
                });
            }

            resultPricing.innerHTML = `
                <h4 class="text-xl font-bold mb-4 text-gray-800 text-center">Indicative Quoting and Pricing</h4>
                <div class="bg-white p-4 rounded-lg shadow-inner">
                    <div id="price-options-container" class="space-y-2">${optionsHTML}</div>
                    ${helperHTML}
                    <div id="price-breakdown" class="pt-4 mt-4 border-t border-gray-200 space-y-2">
                        <div class="flex justify-between items-center text-gray-600"><span>Base Model Price:</span><span id="base-price-display" class="font-medium"></span></div>
                        <div id="options-price-display" class="space-y-1"></div>
                        <div class="flex justify-between items-center font-bold text-gray-900 text-lg pt-2 mt-2 border-t border-gray-300"><span>Estimated Total:</span><span id="total-price-display"></span></div>
                    </div>
                </div>
                <p class="text-sm text-gray-500 mt-2 text-center">${priceInfo.note}</p>
            `;

            const priceOptions = resultPricing.querySelectorAll('.price-option');
            priceOptions.forEach(el => el.addEventListener('change', () => updatePriceBreakdown(priceInfo.base)));
            
            const helperBtn = document.getElementById('diameter-helper-btn');
            if(helperBtn) {
                helperBtn.addEventListener('click', () => {
                    document.getElementById('diameter-helper-text').classList.toggle('hidden');
                });
            }

            updatePriceBreakdown(priceInfo.base);
        }

        function updatePriceBreakdown(basePrice) {
            document.getElementById('base-price-display').textContent = `$${basePrice.toLocaleString('en-AU')}`;
            const optionsDisplay = document.getElementById('options-price-display');
            optionsDisplay.innerHTML = '';
            
            let total = basePrice;
            const priceOptions = resultPricing.querySelectorAll('.price-option');
            
            priceOptions.forEach(el => {
                let cost = 0;
                let label = '';
                
                if (el.tagName === 'SELECT') {
                    const selectedOption = el.options[el.selectedIndex];
                    cost = Number(selectedOption.value);
                    if (cost > 0) {
                       label = el.parentElement.querySelector('label').textContent.replace(':', '') + ` (${selectedOption.dataset.label})`;
                    }
                } else if (el.type === 'checkbox' && el.checked) {
                    cost = Number(el.value);
                    label = el.parentElement.querySelector('label').textContent;
                }
                
                if(cost > 0) {
                    const optionRow = document.createElement('div');
                    optionRow.className = 'flex justify-between items-center text-gray-600 text-sm';
                    optionRow.innerHTML = `<span>${label}:</span><span class="font-medium">+$${cost.toLocaleString('en-AU')}</span>`;
                    optionsDisplay.appendChild(optionRow);
                }

                total += cost;
            });
            
            document.getElementById('total-price-display').textContent = `$${total.toLocaleString('en-AU')} AUD`;
        }

        function calculateResult() {
            const installation = userAnswers['installation'];

            if (installation === 'onsurface') {
                return 'spinsy';
            }

            // In-ground (CTX) path logic
            const finish = userAnswers['ctx_finish'];
            const vehicle = userAnswers['ctx_vehicle'];
            
            if (vehicle === 'standard_single') {
                if (finish === 'custom') return 'ctx_pr';
                return 'ctx';
            }
            
            if (vehicle === 'large_single' || vehicle === 'dual_vehicle') {
                if (finish === 'custom') return 'ctx_pr_plus';
                return 'ctx_plus';
            }

            return 'ctx'; // Fallback for CTX path
        }
        
        updateStageProgress(1);

    </script>
</body>
</html>

